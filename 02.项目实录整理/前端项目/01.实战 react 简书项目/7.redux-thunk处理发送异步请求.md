---
title: 7.redux-thunk处理发送异步请求
categories:
  - 项目实录整理
  - 前端项目
  - 03.实战 react 简书项目
tags:
  - react项目
date:
---
thunk中间件是指redux中  action 和 store之间的 中间件

当在创建store时使用了redux-thunk后，我们在dispatch时dispatch（）的参数不仅仅可以是一个{type：，value}的对象，也可以是一个函数了， 可以在函数内进行ajax请求。

actioncreator中：

```javascript
const changeList = (data) => ({
	type: constants.CHANGE_LIST,
	data: fromJS(data),
	totalPage: Math.ceil(data.length / 10)
});

export const getList = () => {
	return (dispatch) => {
		axios.get('/api/headerList.json').then((res) => {
			const data = res.data;
			dispatch(changeList(data.data));
		}).catch(() => {
			console.log('error');
		})
	}
};
```

UI组件中：

```
dispatch(actionCreators.getList());
```
当dispatch（）触发时，内部getList（）返回的这个箭头函数就会自动执行， 这里UI组件的dispatch方法只干了这个事情，
至于把数据发送到store
是由箭头函数内的dispatch方法执行，
UI组件的dispatch方法把自身作为参数给了箭头函数， 箭头函数内部才有能力使用dispatch,它能够接收到store的dispatch方法

这样 异步的处理请求 和一些复杂逻辑函数就可以在actionCreator里管理了


（页有利于函数的 自动化测试）