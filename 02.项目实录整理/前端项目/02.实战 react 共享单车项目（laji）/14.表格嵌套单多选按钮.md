---
title: 13
categories:
  - 项目实录整理
  - 前端项目
  - 04.实战 react 共享单车项目（lese）
---

### 表格嵌套单选按钮
Table的

rowSelection属性 控制是否可选
onRow属性 点击一行的触发效果



单选和复选的代码区别在于，单选按钮的是否确认选中由Table的onRow属性控制，onRow参数是一个箭头函数，将record和index传入自定义函数onRowClick record是一条记录的对象，index是一条记录的key
```
const rowSelection = {
	type: 'radio',
	selectedRowKeys: this.state.selectedRowKeys
};
			
<Card title="mock数据表格单选">
	<Table 
		columns={columns}
		dataSource={this.state.dataSource2}
		rowSelection={rowSelection}
		onRow={(record, index) => {
			return {
				onClick: ()=>{ this.onRowclick(record,index) }
			}
		}}
	/>
</Card>


onRowclick = (record, index) => {
	let selectKey = [index];
	Modal.info({
		title: '信息',
		content: `用户名: ${record.userName}, 用户爱好：${record.interest}`
	})
	this.setState({
		selectedRowKeys: selectKey,
		selectedItem: record
	})
}
```

DataSource2来源于ajax动态请求

```
componentDidMount(){
    this.request();
}；

request = () => {
    Axios.ajax({
        url: '/table/list',
        data: {
            params: {
                page: 1
            },
            isShowLoading: false
        }
    })
    .then((res)=>{
    
        if(res.code === 0){
            res.result.map((item, index)=>{
                item.key = index;
                return item.id;
            })
            
            this.setState({
                dataSource2: res.result,
                selectedRowKeys: [],
                selectedRows: null
            })
        }
    })
}
```


### 表格嵌套复选框

```
const rowCheckSelection = {
	type: 'checkbox',
	selectedRowKeys: this.state.selectedRowKeys,
	onChange: (selectedRowKeys, selectedRows)=>{
		let ids = [];
		selectedRows.map((item)=>{
			ids.push(item.id)
			return item.id
		});
		this.setState({
			selectedRowKeys: selectedRowKeys,
			selectedIds: ids,
			selectedRows: selectedRows
		})
	}
}

```

```
<Card title="mock数据表格复选">
	<div>
		<Button onClick={this.handleDelete}>删除</Button>
	</div>
	<Table 
		columns={columns}
		dataSource={this.state.dataSource2}
		rowSelection={rowCheckSelection}
		// onRow={(record, index) => {
		// 	return {
		// 		onClick: ()=>{ this.onRowclick(record,index) }
		// 	}
		// }}
	/>
</Card>
```
