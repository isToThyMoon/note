---
title: 13
categories:
  - 项目实录整理
  - 前端项目
  - 04.实战 react 共享单车项目（lese）
---

### pagination 分页

antd有分页控件

但这里我自己通过公共机制封装 分页控件

分页的实现是靠Table标签内的pagination属性控制 pagination是一个dict 不同参数控制不同的功能

```
<Card title="mock数据表格复选 分页">
	<Table
		columns={columns}
		dataSource={this.state.dataSource2}
		rowSelection={rowCheckSelection}
		pagination={this.state.pagination}
	/>
</Card>
```

这里通过在request方法的axios获取后台数据时， 通过调用公共机制里的pagination这个方法获取后台数据设定好的和表格分页相关dict参数，用setState存入basictable的state里以供Table组件取用

```
params = {
		page: 1
};
	
request = () => {
   let _this = this;
	Axios.ajax({
		url: '/table/list',
		data: {
			params: {
				page: this.params.page
			},
			isShowLoading: false
		}
	})
	.then((res)=>{

		if(res.code === 0){
			res.result.list.map((item, index)=>{
				item.key = index;
				return item.id;
			})

			this.setState({
				dataSource2: res.result.list,
				selectedRowKeys: [],
				selectedRows: null,
				pagination: Utils.pagination(res,(current)=>{
					_this.params.page = current;
						this.request();
				})
			})
		}
	})
};
```

Utils下的pagination：

```
function pagination(data, callback){
	
	let page = {
		onChange:(current)=>{
			callback(current)
		},
		current: data.result.page,
		pageSize:data.result.page_size,
		total: data.result.total,
		showTotal:() => {
			return `共${data.result.total}条`
		},
		showQuickJumper: true
	}
	return page;

}
```