---
title: 13
categories:
  - 项目实录整理
  - 后端项目
  - 实战 flask高级编程  鱼书项目
---

发送一个重置密码邮件到邮箱
用户点击邮件中的重置url 进入密码重置页面

系统如何识别是哪个用户呢 ？
1. url中附带用户id  （容易被篡改）
2. 加密用户id   用户id（信息）会被发送向客户端
3. 服务器缓存一对key: value    key为一对随机字符串  value为用户id
2 3 需要设置有过期时间



从用户提交的邮箱 查询数据库
如果找不到这个用户     查询用user = User.query.filter_by(email=account_email).first_or_404()
如果找不到 直接返回404
否则我们直接对user查询结果 进行判空

最终根据状态码抛出httpexception  response返回 不进行之后的代码
