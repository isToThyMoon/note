---
title: 13
categories:
  - 项目实录整理
  - 后端项目
  - 实战 flask高级编程  鱼书项目
---

向他人请求书籍 填写表单后POST
后台保存验证通过后的表单到Drift模型 保存到数据库

一个个赋值form的数据到drift模型实例 是非常麻烦的
我们可以用wtForm提供的 快捷方法

``` python

def save_drift(drift_form, current_gift):
    with db.auto_commit():
        drift = Drift()
        drift_form.populate_obj(drift)
        # 其他字段
        drift.gift_id = current_gift.id
        drift.requester_id = current_user.id
        drift.requester_nickname = current_user.nickname
        drift.gifter_nickname = current_gift.user.nickname
        drift.gifter_id =current_gift.user.id

```
