---
title: 1.概念理解
categories:
  - 01.开发学习笔记 markdown
  - 08.前端框架
  - 02.redux
tags:
  - redux
date:
---

react只是一个视图层框架

但是父子组件层级变多后 数据的传递和维护就变得极其麻烦
状态提升，层层props下传极其麻烦，代码无法维护，
context方式传递带来重复渲染问题，只要修改context数据，所有内部组件都会重渲染。采用多context就会带来Provider hell问题，无尽的Provider。

我们需要一个全局的状态管理。
class时代，使用配套的数据层框架 redux

redux允许所有的数据存放在公共的存储区域store里，不管组件层次结构多复杂，数据的传递和改变变得简单。

Redux = Reducer + Flux

数据更新流程：

创建action--> dispatch(action)-->store自动把previousState和action发给Reducer处理 --> Reducer处理数据-->返回给store 更新数据-->订阅了store数据的组件接收到更新，重新渲染组件

![截屏2022-09-26 上午10.04.23](https://raw.githubusercontent.com/ayrikiya/pic-store/main/note/%E6%88%AA%E5%B1%8F2022-09-26%20%E4%B8%8A%E5%8D%8810.04.23.png)



三个准则：
store是唯一的
只有store可以改变自己的内容
Reducer必须是纯函数：给定固定的输入 就一定会有固定的输出（无date ajax这些的影响） 而且不会有任何副作用（不对传入的参数作修改）

核心的api：
creatStore  创建一个store
store.dispatch 派发action 传递给store
store.getState  获取store里的所有数据内容
store.subscribe(回调函数) 订阅store的改变 只要store改变 subscribe这个函数接收的回调函数就会执行