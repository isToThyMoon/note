# 注意版本问题
react react-dom 同期版本号是完全一致的 不要单独升级一个 要升级就同时升级
react-router-dom版本也要和以上两个包配套
如react-router-domv4配套react16版本
如react-router-domv5配套react17版本
如react-router-domv6配套react18版本
虽说react-router-dom每次版本升级都会兼容旧版react，你可以随意搭配使用，
但抛开react-router-dom的breaking change不提，
react-router-dom库里node_modules自带的不同type版本（如@types/react）也会和项目中react版本需要的type冲突，非常容易导致循环依赖错误问题。
最好保持一致。

还需要注意react相关type库版本的兼容。
"react": "16.12.0", 升级到"react": "^17.0.2",  type的版本升级到"@types/react": "^17.0.45", 发现在vscode中会持续type报错。恢复"@types/react": "^16.9.15"正常，建议维持旧版本type。出现type问题也可以在16 17 18之间切换，type的升级中react官方对一些类型重新作了定义，比如18版本默认删除了ReactNode类型中的children类型，需要自己定义。

codemod是一种对代码进行修改的自动化方式。通过[重构件](https://github.com/eps1lon/types-react-codemod)自动完成升级react18后的type修复问题。
`npx types-react-codemod preset-18 ./src`

# 全局状态管理 和不可变数据
全局状态管理 和不可变数据一般配套使用

2021 11 20

redux工具链
npm i redux react-redux immutable redux-immutable redux-thunk 
npm i -D @types/redux-immutable

```
import { AnyAction } from 'redux';
import { ThunkDispatch } from 'redux-thunk';
```

react-redux 提供 Provider  （dispatch:ThunkDisPatch<any,any,AnyAction>）

redux-thunk   异步组件 异步请求和其他复杂逻辑放在容器组件里显得臃肿 统一移到Redux-thunk管理 是把异步逻辑放在action里执行 (提供ThunkDispatch类型给dispach)
redux-saga    是把异步逻辑单独放在一个文件里统一管理 
redux-immutable  提供immutable的combineReducers 来拆分reducer
immutable     提供 fromJS getIn set等方法 将对象变为不可变对象 在actionCreator 和UI组件中使用

2022 10 31
不再使用immutable 
immer作为上位替代全方位优先于immutable
immer在数万条数据的对象中操作有十几倍的延迟，但毫秒级的延迟无法成为绝大部分应用的瓶颈。



