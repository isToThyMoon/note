# commitlint

检查每次commit命名是否符合规范，如果不符合，就让此次commit失败。

安装commitlint 和它的规则
```
# Install commitlint cli and conventional config
npm install --save-dev @commitlint/{config-conventional,cli}
# For Windows:
npm install --save-dev @commitlint/config-conventional @commitlint/cli

# Configure commitlint to use conventional config 配置规则文件
echo "module.exports = {extends: ['@commitlint/config-conventional']}" > commitlint.config.js
```

@commitlint/config-conventional是commit msg的规则，在官方git有不同的规则可选。
最后一句命令其实就是创建commitlint.config.js文件 内容如echo所示。

最后在husky中配置hook（新版husky有更优选择）

```json
{   
    "husky":{
        "hooks": {
            "pre-commit": "lint-staged",
            "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
        }
    },
    
    "lint-staged": {
        "*.{js,css,md,ts,tsx}": "prettier --write"
    }
}
```

或者配置.husky文件夹下的命令

```
# Install Husky v6
npm install husky --save-dev
# or
yarn add husky --dev

# Activate hooks
npx husky install
# or
yarn husky install

# Add hook
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'
# Sometimes above command doesn't work in some command interpreters
# You can try other commands below to write npx --no -- commitlint --edit $1
# in the commit-msg file.
npx husky add .husky/commit-msg \"npx --no -- commitlint --edit '$1'\"
# or
npx husky add .husky/commit-msg "npx --no -- commitlint --edit $1"

# or
yarn husky add .husky/commit-msg 'yarn commitlint --edit $1'
```

For Windows users, if you see the help message when running npx husky add ..., try node ./node_modules/.bin/husky add ... instead. This isn't an issue with husky code and is fixed in recent versions of npm 8.




规则：

```
[
  'build', 影响构建系统或外部依赖项的更改（webpack npm等）
  'chore',  构建配置相关 更改构建过程或辅助工具和库，例如文档生成
  'ci', 对ci配置文件和脚本的更改（一些自动化工具的配置文件 或者脚本修改）
  'docs', 仅文档修改
  'feat', 新功能 feature
  'fix', 错误修复
  'perf', 性能相关 改进性能的代码更改
  'refactor', 代码重构，既不修复错误也不增加新功能的代码更改（重构）
  'revert', 分支回溯
  'style', 样式相关 不影响代码含义的样式更改
  'test' 测试相关 添加缺失或更正现有测试
];
```