---
title: 04.computed method watch
categories:
  - 01.开发学习笔记 markdown
  - 08.前端框架
  - 04.vue
---

# 计算属性computed：

```html
<div id="app">
  {{fullName}}
</div>

var app = new Vue({
  el: '#app',
  data: {
    firstName: 'Florian',
	lastName: 'Wang'
  },
  //计算属性
  computed:{
	fullName: function(){
		return this.firstName + '' + this.lastName
	}
  }
})
```

计算属性是默认采用缓存的

它的缓存机制是当计算属性依赖的变量（如上的firstName和lastName）没有产生变化，它就不会改变，而是采用缓存。

## 计算属性的getter setter

```html
<div id="app">
  {{fullName}}
</div>

var app = new Vue({
  el: '#app',
  data: {
    firstName: 'Florian',
	lastName: 'Wang'
  },
  //计算属性
  computed:{
	fullName: {
		get: function(){
			return this.firstName + '' + this.lastName
		},
		set: fuction(value){
			console.log(value)
			var arr = value.split(' ');
			this.firstName = arr[0];
			this.lastName = arr[1];
		}
	}
  }
})
```



# 方法method：

```html
<div id="app">
  {{fullName()}}
</div>

var app = new Vue({
  el: '#app',
  data: {
    firstName: 'Florian',
	lastName: 'Wang'
  },
  //方法
  methods:{
	fullName: function(){
		return this.firstName + '' + this.lastName
	}
  }
})
```

方法 methods也可以实现上面的结果。但不同的是，不同于计算属性，它是没有缓存的。每次页面重新渲染，方法都会执行。



# 侦听器

```html
<div id="app">
  {{fullName}}
</div>

var app = new Vue({
  el: '#app',
  data: {
    firstName: 'Florian',
	lastName: 'Wang',
	fullName: ''
  },
  //侦听器
  watch: {
	firstName: function(){
		this.fullName = this.firstName + '' + this.lastName
	},
	lastName: function(){
		this.fullName = this.firstName + '' + this.lastName
	}
  }
})
```

watch类似，也会有一个相对的缓存，性能尚可，但是相比计算属性，代码量更多。


# computed，methods，watch的区别
computed：
计算属性将被混入到 Vue 实例中。所有 getter 和 setter 的 this 上下文自动地绑定为 Vue 实例。

methods：
methods 将被混入到 Vue 实例中。可以直接通过 VM 实例访问这些方法，或者在指令表达式中使用。方法中的 this 自动绑定为 Vue 实例。

watch：
观察和响应 Vue 实例上的数据变动
它是一个对象，键是需要观察的表达式，值是对应回调函数。值也可以是方法名，或者包含选项的对象。Vue 实例将会在实例化时调用 $watch()，遍历 watch 对象的每一个属性。

## 加载顺序
computed是在HTML DOM加载后马上执行的，如赋值；（属性将被混入到 Vue 实例）

methods则必须要有一定的触发条件才能执行，如点击事件。

watch用于观察Vue实例上的数据变动。默认加载的时候先computed再watch。不执行methods；触发某一事件后先computed再methods再到watch。

computed计算属性是基于它们的依赖进行缓存的。

## 缓存对比
计算属性computed只有在它的相关依赖发生改变时才会重新求值。
当有一个性能开销比较大的的计算属性 A ，它需要遍历一个极大的数组和做大量的计算。然后我们可能有其他的计算属性依赖于 A ，这时候，我们就需要缓存！

每次确实需要重新加载，不需要缓存时用methods。

watch和computed对比，使用watch方法观察数据（单个数据）。使用computed方法计算数据（多个数据）。