---
title: 01.字体度量、line-height 和 vertical-align
categories:
  - 01.开发学习笔记 markdown
  - 07.前端
  - 02.css
---

具体见知乎文章https://zhuanlan.zhihu.com/p/25808995

一款字体会定义一个 em-square，它是用来盛放字符的金属容器。这个 em-square 一般被设定为宽高均为 1000 相对单位，不过也可以是 1024、2048 相对单位。

设置文字font-size,对于中文字符，可以取到文字宽度就是font-size设置的值。对于英文字符不同的字符有不同的文字宽度。

字体度量都是基于这个相对单位设置的，包括 ascender（顶部到文字baseline的范围）、descender（baseline到底部范围）、capital height（大写字母占据范围）、x-height 等。注意这里面的值是允许相对于 em-square 出血（bleed outside）的（译者注：大概可以理解为超出 em-square）

在浏览器中，上面的 1000 相对单位会按照你需要的 font-size 缩放。

对于高度，如Catamaran 字体放到 FontForge 中，分析它的字体度量：em-square 是 1000，ascender 是 1100，descender 是 540。我们还看到 Capital Height 是 680，X height 是 485。

通过测试发现，macOS 上的浏览器使用了 HHead Ascent 和 HHead Descent 值，Windows 上的浏览器使用了 Win Ascent 和 Win Descent（而且两个平台上的值不一样）。
![catamaran](https://pic4.zhimg.com/v2-cb05dd4dc6908e522c0f69392ed1fe87_r.jpg)

这意味着尽管它的 em-square 只有 1000 个相对单位， Catamaran 字体占据了ascender + descender = 1100 + 540 个相对单位，所以当我们设置 font-size:100px 时，这个字体里的文字占据的固定高度是 164px。这个计算出来的高度决定了 HTML 元素的 content-area（内容区域）高度，后面我会讲到 content-area。你可以认为 content-area 就是对文字所在元素设置 background 作用的区域（这个区域是不会改变的，无论line-height怎么变）。

我们还能看出大写字母的高度是 68px，小写字母的高度（x-height）是 49px。所以 1ex = 49px，1em = 100px，而不是 164px。（真好，em 是基于 font-size，而不是基于计算出来的高度）。

# 行高line-height

line-height: 长度值|百分比（相对于font-size的百分比）
如果同时设置了font-size 和 line-height 而且都是px为单位，如果font-size 大于line-height 字行会发生重叠，
解决方法：使用line-height的值为em或% 它与字体的大小有关。一般开发时使用em
例如font-size为20px line-height为1.2em  那么实际的行高为20乘1.2 24px

# 度量
1.px
是pixel缩写，是基于像素的单位.在浏览网页过程中，屏幕上的文字、图片等会随屏幕的分辨率变化而变化，一个100px宽度大小的图片，在800×600分辨率下，要占屏幕宽度的1/8，但在1024×768下，则只占约1/10。所以如果在定义字体大小时，使用px作为单位，那一旦用户改变显示器分辨率从800到1024，用户实际看到的文字就要变“小”（自然长度单位），甚至会看不清，影响浏览。 

2pt
是point(磅)缩写，是一种固定长度的度量单位,大小为1/72英寸。如果在web上使用pt做单位的文字，字体的大小在不同屏幕（同样分辨率）下一样，这样可能会对排版有影响，但在Word中使用pt相当方便。因为使用Word主要目的都不是为了屏幕浏览，而是输出打印。当打印到实体时，pt作为一个自然长度单位就方便实用了：比如Word中普通的文档都用“宋体 9pt”，标题用“黑体 16pt”等等，无论电脑怎么设置，打印出来永远就是这么大。

3.em
是相对单位，是一个相对长度单位，最初是指字母M的宽度，所以叫em，现指的是字符宽度的倍数，用法类似百分比，如：0.8em, 1.2em,2em等。通常1em=16px（浏览器默认字体大小16px），em是指父元素的字体大小。在一个页面上给定了一个父元素的字体大小,这样就可以通过调整一个元素来成比例的改变所有元素大小.它可以自由缩放,比如用来制作可伸缩的样式表。类似还有ex的概念，ex 相对于字符“x”的高度，此高度通常为字体尺寸的一半。

4.rem
rem是CSS新增的，em是相对于其父元素来设置字体大小的，这样就会存在一个问题，进行任何元素设置，都有可能需要知道他父元素的大小，在多次使用时，就会带来无法预知的错误风险。而rem是相对于根元素<html>(r:root)，使用rem我们只需要在根元素确定一个参考值，然后就可以控制整个html页面所有字体了。


# 其他注意点
span元素 或者inline元素 设置的line-height影响的是其所在元素的高度 实际在审查这个元素时，我们看到的是span这个content-area高度，它谁也不影响。span元素被放在外层元素中看时，line-height就生效了，line-height如果高于content-area，高出部分平分分别加到content-area上下，整体构成一个line-box line-box撑起父元素的高度。

同一个父级元素下有不同字体的span 因为baseline或者其他对其方式，会导致span间上下错位，line-box上下错位，整体父元素高度就不正常了。

但即使span都设置了自己的line-height确保不错位。但span间有空白节点。这个空白节点也会产生自己的line-box，这就是幽灵空白节点，一样造成上述的line-box错位问题。