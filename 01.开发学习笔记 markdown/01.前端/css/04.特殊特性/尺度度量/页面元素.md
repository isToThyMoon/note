
# 页面元素的度量

## getBoundingClientRect()
 用于获取元素的位置和大小信息。
最新的常用api，虽然说使用这个api会导致重排，但一般遇不到性能问题。

box = Element.getBoundingClientRect();

Element.getBoundingClientRect() 方法返回元素的大小及其相对于**视图窗口**的位置。
如果是标准盒子模型（content box），元素的尺寸等于width/height + padding + borderWidth的总和。
如果box-sizing: border-box，元素的的尺寸等于 width/height。

拥有left, top, right, bottom, x, y, width, height这几个以像素为单位的只读属性number用于描述整个边框。
除了width 和 height 以外的属性是相对于视图窗口的左上角来计算的
。
  
  
## offsetxxx（offsetWidth包含content padding border 滚动条）相对非static父级的offset

和getBoundingClientRect差不多
用于获取元素相对于包含元素的偏移位置。

偏移量计算，那么理所应当有一个偏移参照，定位父级offsetParent；
偏移量计算参照当前元素最近的经过定位的父级元素（非static），如果没有会一直上溯到body

offsetHeight offsetWidth 元素垂直水平方向上的占用空间 包括content padding border 滚动条

offsetTop offsetLeft 元素上外、左外边框距离包含该元素的offsetParent的上内、左内边框的距离

看起来类似style.top，
但offsetTop返回数字，只读，
style.top返回字符串px，可读写。若css未指定过top，返回空字符串。

[注意]firefox浏览器有兼容性问题

要知道某个元素在页面上的偏移量，将这个元素的offsetLeft和offsetTop与其offsetParent的相同属性相加，并加上offsetParent的相应方向的边框，如此循环直到根元素，就可以得到元素到页面的偏移量：
```js
function getElementLeft(ele){
    var actualLeft  = ele.offsetLeft;
    var parent = ele.offsetParent;
    while (parent != null){
        actualLeft = actualLeft + parent.offsetLeft + parent.clientLeft;
        parent = parent.offsetParent;
    }
    return actualLeft + 'px';
}
function getElementTop(ele){
    var actualTop  = ele.offsetTop;
    var parent = ele.offsetParent;
    while (parent != null){
        actualTop = actualTop + parent.offsetTop + parent.clientTop;
        parent = parent.offsetParent;
    }
    return actualTop + 'px';
}
```

## clientxxx（元素content加padding区域的属性）
用于获取元素的客户区尺寸，即元素的内容区域尺寸，不包括滚动条或边框。

clientHeight clientWidth 不包含border的 内容区域加padding的占用空间 不包含滚动条

clientLeft ClientTop 返回border相应的宽度 border width
clientLeft 但如果文字方向从右往左排列，且存在垂直滚动条，border width+scrollbar width
ClientTop 上边框宽度

## scrollxxx
Ele.scrollHeight...

页面滚动实现有滚动容器和滚动内容两个部分。
scrollxxx是滚动容器上的属性，但是是对滚动内容的尺寸度量。

scrollWidth 和 scrollHeight：
这些属性用于获取元素的滚动尺寸，即元素内容区域的完整尺寸，包括滚动时不可见的部分。
通常用于确定元素内容的完整尺寸，尤其是在需要滚动时，以便调整滚动条的大小。

scrollLeft 和 scrollTop：
这些属性用于获取元素在水平和垂直方向上的滚动位置。
通常用于确定元素在滚动时的当前滚动位置，以实现滚动效果或控制视图。
它们通常用于滚动**容器**元素，如 div 或 window。

Element.scrollTop 属性可以获取或设置一个元素的**内容**垂直滚动的像素数，
一个元素的 scrollTop 值是这个元素的**滚动内容顶部**（卷起来的）到它的视口可见内容（的顶部）的距离的度量。是可读写的，但是改写属性造成滚动是没有平滑效果的，常常采用window.scrollTo()代替。


## window.getComputedStyle
用于获取元素的样式属性值。
`window.getComputedStyle(element)` 是一个 JavaScript 方法，用于获取一个元素的计算样式（computed style）。它返回一个包含元素的所有计算样式属性的对象，这些样式属性可以用于检索元素的最终呈现样式，无论这些样式是在样式表中定义的，还是通过内联样式属性或其他方式应用的。

这是一个使用 `getComputedStyle` 的示例：

```javascript
const element = document.getElementById('myElement');
const computedStyle = window.getComputedStyle(element);

// 获取元素的计算样式属性
const width = computedStyle.getPropertyValue('width');
const color = computedStyle.getPropertyValue('color');
const fontSize = computedStyle.getPropertyValue('font-size');

console.log('Width:', width);
console.log('Color:', color);
console.log('Font Size:', fontSize);
```

在这个示例中，`getComputedStyle` 用于获取 `element` 元素的计算样式，然后可以使用 `getPropertyValue` 方法来检索特定样式属性的值。

注意以下几点：

1. `getComputedStyle` 返回的是计算样式，即元素的最终呈现样式，它包括继承的样式和应用的样式。

2. 计算样式是一个只读对象，你可以查看它，但不能修改元素的样式。

3. `getPropertyValue` 方法允许你通过属性名称来检索样式的值。

4. 计算样式的属性名通常是 CSS 样式属性的驼峰写法，如 `backgroundColor`，而不是连字符形式的属性名，如 `background-color`。

`getComputedStyle` 是一个有用的工具，通常用于获取元素的最终样式属性，以进行计算、操作或检查。