---
title: 00.BOM(browser object model)
categories:
  - 01.开发学习笔记 markdown
  - 06.JavaScript
  - 00.浏览器相关
---

BOM(browser object model) 是什么 有什么用
HTML5 新增的 BOM API 和新功能
单页应用(SPA(single page application))


# BOM
BOM（浏览器对象模型，Browser Object Model）是JavaScript中用于与浏览器窗口和浏览器环境进行交互的对象模型。BOM 并不是W3C DOM（文档对象模型）的一部分，而是浏览器厂商提供的扩展功能，因此它的特性和实现在不同浏览器之间会有些许差异。

可以通过js来操作浏览器的一些行为。

## window
window是浏览器的一个实例，表示浏览器窗口或一个帧（frame）的全局对象。管理浏览器页面所有的东西，它既是通过JavaScript访问浏览器窗口的一个接口，又是ECMAscript规定的global对象

控制窗口操作：BOM 允许你打开、关闭、移动、调整大小或获取关于浏览器窗口的信息。
如
window.open(url, name, specs, replace)：打开一个新的浏览器窗口。
window.close()：关闭当前浏览器窗口。
window.resizeTo(width, height)：调整浏览器窗口的大小。
window.moveTo(x, y)：移动浏览器窗口的位置。
window.innerWidth 和 window.innerHeight：获取浏览器窗口的内部宽度和高度。
window.outerWidth 和 window.outerHeight：获取浏览器窗口的外部宽度和高度。

## window.navigator
用来查询浏览器的信息的
包含有关浏览器的信息，如浏览器类型、版本等。

比如当前的操作系统平台, 浏览器型号厂商等等
例如
navigator.userAgent
"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36"
navigator.platform
"MacIntel"

## 导航控制
管理历史记录 导航 URL
可以使用 BOM 来控制页面的导航，包括前进、后退和跳转到其他网页。

window.history 对象：允许前进、后退和跳转到特定页面。
window.location 对象：管理 URL，提供有关当前页面的 URL 信息。

### window.location
用来管理 URL 的, 下面是例子

改变 href 属性就可以跳转页面
hash: ""
host: "s.taobao.com"
hostname: "s.taobao.com"
href: "https://s.taobao.com/search?q=3ds&imgfile=&js=1&stats_click=search_radio_all&ie=utf8"
search: "?q=3ds&imgfile=&js=1&stats_click=search_radio_all&ie=utf8"
origin: "https://s.taobao.com"
pathname: "/search"
port: ""
protocol: "https:"
reload: 函数, 刷新当前页面
replace: 函数, 替换当前页面, 有参数

如果用location.href = '' 来做页面跳转，要填写完整的http头 否则会被拼接到当前href的域名之后来跳转

前端框架库的hash模式路由就是基于location.hash的特性来实现的。

## window.history
用来处理历史纪录的

在 HTML5 它增加了一些 API 使得它也可以做单页应用(SPA, single page app)

history.length      // 历史列表中的 url 数量

history.back()      // 相当于点击后退按钮
history.forward()   // 相当于点前进
history.go(-2)      // 相当于点击两次后退按钮

history对一个窗口页面有效
如果你连续调转了三个页面 history历史长度为3
回退2个页面到第一个页面 再跳转新的一个页面
history长度为2
之前长度为3 history其实已经被覆盖了 
很好理解。

// 下面是 HTML5 新函数

最主要的 API 有以下两个：history.pushState() 和 history.repalceState()

## history.pushState

只能在相同域名下
可以使用 queryString
主要作用是来做 SPA

`history.pushState(null, 'title', "/profile")`
三个参数分别是
    自定义对象
    新页面的标题, 但是现在还没有浏览器实现这个功能
    新页面的地址

```js
var state = {
    page: "settings"
}
history.pushState(state, "settings", "/settings")
```

还有一个 replaceState 函数, 它的作用和 pushState 一样, 只是不生成一条历史纪录

## popstate 事件
用户点击 前进 后退 按钮的时候, 会触发 window 的 popstate 事件
于是可以在这里操作

```
window.addEventListener("popstate", function(e) {
    var state = e.state;
    // state 就是 pushState 的第一个参数
    console.log('pop state', state)
})

```
需要注意的是js代码调用history.pushState()或history.replaceState()不会触发popstate事件。只有在做出浏览器动作时，才会触发该事件，如用户点击浏览器的回退按钮（或者在Javascript代码中调用history.back()或者history.forward()方法）

## window.screen 
管理屏幕
屏幕操作：BOM 允许你获取有关用户屏幕的信息，以便进行响应式设计。
screen.width 和 screen.height：获取用户屏幕的宽度和高度。

## document.Cookie 
document.cookie：允许你读取和设置浏览器中的 Cookie。

## 定时器
BOM 提供了 setTimeout 和 setInterval 等方法，用于在浏览器中设置定时任务。

## 对话框：
BOM 允许你在浏览器中显示警告框、确认框和提示框，以与用户进行交互。
alert(message)：显示警告框。
confirm(message)：显示确认框。
prompt(message, default)：显示提示框。
