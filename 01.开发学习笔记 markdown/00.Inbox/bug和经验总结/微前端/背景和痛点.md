# 

前端在架构上面的变化远落后于后端，后端的架构已经经历了微服务、中台化、DDD 改造的腥风血雨…

在改造成微前端之前, 我们也是一个巨型的单体应用，后面随着业务的复杂化，业务和团队进一步进行拆分， 我们的前端项目也根据康威定律，进化成为了‘多页应用’。

在已有的架构下，我们需要应用某些配置可能会牵扯多个项目，比如主题、文案、接口配置等信息的修改，需要针对多个项目进行创建分支、修改代码、构建、发布、部署… 一系列繁琐的流程。



主要原因是我们的业务系统经过长期、多团队、多业态的迭代，积累了大量的技术债。

技术栈老旧，开发效率低，我们想要应用新的技术和规范，但碍于项目体量大、质量差，重构举步维艰。
子应用的拆分没有固定的范式。有些模块按照团队拆分出独立的仓库，有些仓库则采用 MonoRepo。前者仓库之间存在大量重复代码、缺乏管理；而后者 MonoRepo 则越来越臃肿, 职责不清晰，编译缓慢, 逐渐也演变成了巨石应用。
基于多页的子应用缺乏管理，规范/标准不统一。无法统一控制视觉呈现、共享的功能和依赖。造成重复工作
新旧项目、第三方应用集成都很复杂。
多行业、多团队的项目特性，导致工程管理复杂，扩展性差。
部署方式原始。
应用按照菜单聚合，而不是按照业务聚合。


朴素的多页应用通常按照“菜单”来拆分应用，比如常见布局中左边菜单右边内容的顶级 Memu。

后面来这一个这样的需求，a 应用的某些功能菜单需要在 b Memu 下展示，这时候就傻眼了：

把 a 的相关代码搬运到 b？如果后面菜单又改了怎么办？再说，你能搬得动吗？
用 iframe 将 a 套在 b 应用下？

因此我们亟需一套新的架构，能统一管理不同团队业务线、同时能够保持原本的独立性和灵活性。这时候微前端架构就进入了我们的考察范围：

我们需要一个「底座」将不同的应用聚合起来，将原本离散的应用通过一个基座串联起来：

离散的应用结构，转换为星状结构。基座可以统一管理子应用。
开发者可以更专注于业务的开发。基座会提供配套的登录会话管理、权限管理、菜单管理、路由管理、主题管理等方案，子应用只需关心业务功能本身的开发。
更容易地集成应用。不管是自己的业务应用、老旧系统、还是外部第三方应用，都可以在极少改动的情况下集成进来。
视觉统一。
拆分巨石应用，让子应用可以按照“业务聚合”。不再耦合菜单， 让应用更轻量、内聚、更可维护。

使用微前端之后，子应用不再耦合菜单，菜单由基座来管理和组合，菜单可以被放在任意位置。

原本就是多页应用的架构的话，基于路由分发 + 基座形式的微前端方案是一种比较自然的选择。