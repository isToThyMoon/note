
# 页面直接报提示崩溃
崩溃：提示内存不足等报错信息。

比如:
崩溃啦！
显示此网页时出了点问题。
错误代码：out of memory。

一般来说，原因是内存溢出或cpu问题。错误代码会有相关提示。

1. 任务管理器的使用方法最为简单，打开需要分析的页面，直接观察内存占用空间与 JavaScript 使用的内存即可。如果这两个数据持续上升，说明内存正在泄漏。
2. Performance工具，打开需要分析的页面，等页面稳定下来后，点击 Performance 左上角的录制按钮开始录制，它会保存下页面的快照、JS Heap、Document、Nodes、Listener、GPU Memory等信息。录制一段时间（最好在一分钟以上）后，停止录制，等待工具生成报告。
3. 发者工具 Memory 面板,比较复杂，寻找js堆栈中的信息，可以找到可能导致内存泄露的代码。

比如，使用百度地图，new BMapGL.Map("")。该地图实例保存在组件内，而drawer组件设置了内容区域close时destroy。
开关多次后浏览器崩溃，为什么？
开关组件，组件从dom中移除，但没有清除地图实例
所以要么地图实例的引用作为一个全局变量，要么在组件卸载时候手动清除地图实例map.distroy()。

# 崩溃
网页崩溃的原因大概率是因为内存溢出导致的崩溃，也有CPU过高导致的页面卡死，本地可以查看任务管理器排查是内存爆了还是cpu高占用。

注意直播这种消耗资源的组件，因为播放器的原因在开发人员编写过程中很容易出现内存溢出的问题
注意需要setInterval()定时器的地方，记得clearInterval()之后要将变量设置为null

如echarts未正确销毁导致内存不断上升：
使用正确的 echarts 实例对象销毁方法：
进入到我们的 ehcarts 组件代码，定位到 beforDestory 钩子，可以看到，已经有一段代码对 echarts 实例进行释放了。
```
componentDidMount(){
    // 释放该图例资源
    this.myChart && this.myChart.clear();
}
```
进入 echarts 官网查询销毁实例的相关 api，发现.clear()方法只是清空了实例，并没有销毁，而.dispose()方法才会销毁实例。
答案到这里已经呼之欲出了，我们项目中之前一直用的是.clear()方法清空 echarts 实例对象，而不是用.dispose()销毁，所以 echarts 实例并没有被正常销毁，当我们频繁地切换页面的时候，echarts 实例就会不断的累加，占用的内存也会随之增加。所以，这里建议，以后我们封装 echarts 组件的时候，统一使用.dispose()方法销毁组件。